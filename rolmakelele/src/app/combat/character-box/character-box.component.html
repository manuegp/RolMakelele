<ng-template #statsTpl>
  <div class="stats-tooltip p-2 bg-white rounded shadow">
    <div *ngFor="let key of statKeys" class="mb-1">
      <span [style.color]="getStatColor(key)">
        {{ labels[key] }}: {{ getStatValue(key) }}
      </span>
    </div>
  </div>
</ng-template>

<div
  *ngIf="character"
  class="character-box p-3 border rounded position-relative"
  [class.selectable]="selectable"
  (click)="onClick()"


  ngxTooltip


  [template]="statsTpl"

  placement="top"
  arrow
  [autoUpdate]="true"
>
  <div class="fw-bold">{{ character.name }}</div>
  <div class="mb-1">
    <span
      *ngFor="let t of character.types"
      class="badge me-1"
      [style.backgroundColor]="t.color"
      >{{ t.name }}</span
    >
  </div>

  <div class="progress mt-2" style="height: 8px;">
    <div
      class="progress-bar"
      role="progressbar"
      [style.width.%]="healthPercent"
      [attr.aria-valuenow]="character.currentHealth"
      [attr.aria-valuemin]="0"
      [attr.aria-valuemax]="character.stats.health"
    ></div>
  </div>

  <small class="text-muted">
    {{ character.currentHealth }} / {{ character.stats.health }}
  </small>
</div>
